webpackJsonp([1],{IQSp:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAdCAYAAAA+YOU3AAABwklEQVRYhcWYh0oDQRRFTzbGggULVkSxoCIq9k/KxxqxoyioIIoNu8GGiQzewBKivoAz+yDsnYWzOUnYeW+TymazM8Ag33UOrGKvRNgI2AFute4FxqqQToR10gV9yledGwd6jHwibKTjG5ADPrWeBZqN4sHZKJbvgS3lDLCko6WCslHZ+hQ4Um4E5oGUUTwYWy7tahe4Vu4CJozSwdhK0kVgDchrPQr0GaWDsJWkXb3rzo7fIC1Gce/sT9KuHoF15TSwDNQaxb2yv0mjTnWg3AAsGhjvrEVgH7hU7gAmjdLeWOu35n6uZ+UhYKAK8X9nrdIfwIqOrqaBtqRYqzTaig6VI10gEbYaadepRpTdsLOdFGuVzmjrKc0E7k3vkmKt0nNAk/IxcGLkvLAWaTfndivfaEawlhf2L+n4E8WLWmzBKOyN/U26Rb0fzQI5zQaW8sr+JJ1R66zRehN4MAp7ZytJu+F7QVsN2iPPjMJB2ErSrsd3Kl8Be0bhYGy5dD8wrJzXUF40Cgdj49Kt+gMF9fpcrOf/VUHZknSdnoLTWm8AT0bh4Gykl7tj63XOzbEXRuFEWAdOAe1aO6j0xGCp8CzwBbuAym9vWEZNAAAAAElFTkSuQmCC"},r6zw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),r=a.n(s),n=a("Xxa5"),o=a.n(n),u=a("exGp"),i=a.n(u),c=a("PRyv"),m=a("DEN3"),l=a.n(m),d={name:"branch",data:function(){return{imgURL:l.a.imgURL,id:null,subbranchList:[],clubId:this.$route.query.clubId,textNumbers:this.$route.query.textNumbers,shopName:this.$route.query.shopName,loginCode:this.$route.query.userId,logo:"",mobile:this.$route.query.mobile||"",share:this.$route.query.share||"",autoLogin:this.$route.query.autoLogin||"",chineseName:"",englishName:"",sourceShopNum:null,configurable:null,shopNum:null,ceshiUser:this.$route.query.ceshiUser}},mounted:function(){this.getTextNumbers()},methods:{getTextNumbers:function(){var e=this;return i()(o.a.mark(function t(){var a,s,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.clubId&&0!==e.clubId){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.get("publicNumber/getClubInfoByClubMemberCode",{params:{clubId:e.clubId}});case 4:a=t.sent,"success"===(s=a.data).msg?(r=s.data,e.textNumbers=r.clubmembercode,e.shopName=r.clubname,window.sessionStorage.setItem("clubmembercode",r.clubmembercode),e.configurablegetConfigInfo()):"fail"===s.msg&&e.$toast(s.data);case 7:case"end":return t.stop()}},t,e)}))()},getSubbranch:function(){var e=this;return i()(o.a.mark(function t(){var a,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("publicNumber/getShopsByClub",{params:{clubMemberCode:e.textNumbers,clubId:e.clubId}});case 2:a=t.sent,"success"===(s=a.data).msg&&(e.subbranchList=s.data.tbShopsList,e.chineseName=s.data.chineseName,e.englishName=s.data.englishName,e.logo=s.data.logo);case 5:case"end":return t.stop()}},t,e)}))()},selected:function(e,t){var a=this;return i()(o.a.mark(function s(){return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:a.id=e,a.shopNum=t,a.login(a.loginCode);case 3:case"end":return s.stop()}},s,a)}))()},saveClubInfoByToken:function(e){var t=this;return i()(o.a.mark(function a(){var s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.get("wechar/saveClubInfoByToken",{params:{token:e,clubMemberCode:t.textNumbers,shopNum:t.shopNum}});case 2:s=a.sent,"success"===s.data.msg&&window.localStorage.setItem("shopNum"+t.clubId,t.shopNum);case 5:case"end":return a.stop()}},a,t)}))()},getJdUserId:function(){var e=this;return i()(o.a.mark(function t(){var a,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("wx/getJdUserId",{params:{loginCode:e.loginCode}});case 2:a=t.sent,s=a.data,console.log(s),"success"===s.msg&&e.login(s.data.userId),"fail"===s.msg&&e.$toast(s.data.resultMessage);case 7:case"end":return t.stop()}},t,e)}))()},login:function(e){var t=this;return i()(o.a.mark(function a(){var s,n,u,i,c,m,l,d;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:for(s=t.configurable,n=!1,u=0;u<s.length;u++)63==s[u].limitid&&(n=!0);return a.next=5,t.$http.get("memberLogin/loginedJDApp",{params:{userId:e,clubMemberCode:t.textNumbers,shopNum:t.shopNum}});case 5:if(i=a.sent,"success"!==(c=i.data).msg){a.next=23;break}if(m=c.data.infa.openid,window.sessionStorage.setItem("token",m),t.saveClubInfoByToken(m),c.data.infa.age&&"18"==c.data.infa.age.length&&window.sessionStorage.setItem("isCertification","true"),n){a.next=16;break}t.$router.replace({name:"index"}),a.next=22;break;case 16:return a.next=18,t.$http.get("common/getHealthCommitment",{params:{token:m,shopNum:t.shopNum}});case 18:l=a.sent,"success"===(d=l.data).msg?d.data&&window.sessionStorage.setItem("protocolStr",r()(d.data)):t.$toast(d.data),d.data?t.$router.replace({name:"protocol"}):t.$router.replace({name:"index"});case 22:window.sessionStorage.setItem("isLogin","true");case 23:"fail"===c.msg&&t.$toast(c.data);case 24:case"end":return a.stop()}},a,t)}))()},configurablegetConfigInfo:function(){var e=this;Object(c.u)({clubMemberCode:this.textNumbers}).then(function(t){"success"===t.msg&&(e.configurable=t.data,sessionStorage.setItem("configurable",r()(e.configurable)),e.getSubbranch())})}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"branch"}},[a("header",[a("div",[a("img",{staticClass:"logo",attrs:{src:e.imgURL+"/images/"+e.logo,alt:""}})]),e._v(" "),a("p",[e._v(e._s(e.chineseName))])]),e._v(" "),a("div",{staticClass:"title"},[e._v(e._s(e.englishName))]),e._v(" "),a("ul",{attrs:{id:"fendianName"}},e._l(e.subbranchList,function(t){return a("li",{key:t.id,class:{selected:t.id===e.id},on:{click:function(a){return e.selected(t.id,t.shopNum)}}},[a("div",{staticClass:"liLeft"},[a("img",{staticClass:"leftImg",attrs:{src:e.imgURL+"/images/"+t.shopImg,alt:""}}),e._v(" "),a("div",{staticClass:"name"},[e._v(e._s(t.name))])]),e._v(" "),e._m(0,!0)])}),0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"rightImg"},[t("img",{attrs:{src:a("IQSp"),alt:""}})])}]};var h=a("VU/8")(d,g,!1,function(e){a("y9e6")},"data-v-eabf7e54",null);t.default=h.exports},y9e6:function(e,t){}});
