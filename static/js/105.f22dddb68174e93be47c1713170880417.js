webpackJsonp([105],{cPv0:function(t,e){},cdaK:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mvHQ"),a=s.n(i),n=s("Xxa5"),r=s.n(n),o=s("exGp"),c=s.n(o),u=s("DEN3"),l=s.n(u),d=s("MJLE"),m=s.n(d),h={name:"mySiteDetails",data:function(){return{imgURL:l.a.imgURL,pageNoIndex:1,mySiteList:[],cancelId:[],shopNum:window.sessionStorage.getItem("shopNum"),token:window.sessionStorage.getItem("token"),clubId:window.sessionStorage.getItem("clubId"),isOpen:!1,limitid44show:!1,qrcodeActive:!1,qrcodeName:"",billNum:this.$route.query.billNum,limitid58show:!1}},created:function(){this.getmySiteList(this.billNum),this.configurable=JSON.parse(sessionStorage.getItem("configurable"));for(var t=0;t<this.configurable.length;t++)58==this.configurable[t].limitid&&(this.limitid58show=!0)},methods:{goback:function(){this.$router.push({name:"myCentre"})},quickMark:function(t,e,s){if("1"!==s.infSt.ifShare){this.$refs.codeBox.ontouchmove=function(t){t.preventDefault()},this.qrcodeActive=!0,this.qrcodeName=t;new m.a(this.$refs.qrCodeUrl,{text:e,width:150,height:150})}else this.$router.push({name:"siteShare",query:{shareNum:s.infSt.shareNum,name:t,serialnumber:e}})},closeQrcode:function(){this.qrcodeActive=!1,this.$refs.qrCodeUrl.innerHTML=""},getmySiteList:function(t){var e=this;return c()(r.a.mark(function s(){var i,a;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.$http.get("place/getOrderPlaceInfo",{params:{shopNum:e.shopNum,token:e.token,outtradeno:t}});case 2:i=s.sent,"success"===(a=i.data).msg?e.mySiteList=a.data:e.$toast(a.data);case 5:case"end":return s.stop()}},s,e)}))()},affrmSite:function(t){var e,s=this,i=this.mySiteList.filter(function(e){return e.id===t})[0];(console.log("1"!==i.showStatus),"0"===i.showStatus||"1"===i.showStatus)&&this.$messagebox({title:"温馨提示",message:"您要确认到场吗",showCancelButton:!0,confirmButtonText:"确认到场",cancelButtonText:"取消"}).then((e=c()(r.a.mark(function e(i){var a,n,o,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("confirm"!==i){e.next=19;break}return e.next=3,s.$http.get("place/confirmPlaceAppointment",{params:{id:t,token:s.token}});case 3:if(a=e.sent,n=a.data,console.log(n),"success"!==n.msg){e.next=18;break}o=s.mySiteList,c=0;case 9:if(!(c<o.length)){e.next=16;break}if(o[c].id!==t){e.next=13;break}return o[c].showStatus="2",e.abrupt("return");case 13:c++,e.next=9;break;case 16:e.next=19;break;case 18:s.$toast(n.data);case 19:case"end":return e.stop()}},e,s)})),function(t){return e.apply(this,arguments)}))},lookTXR:function(t){window.sessionStorage.setItem("myTXR",a()(t.shares)),this.$router.push({name:"myTongxinren",query:{id:t.id}})}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"myOrderSite"}},[i("ul",{staticClass:"content"},t._l(t.mySiteList,function(e){return i("li",{key:e.id},[i("div",{staticStyle:{overflow:"hidden"}},[i("div",{staticClass:"imgBox_l"},[e.infSt?i("img",{attrs:{src:t.imgURL+"/images/"+e.infSt.fieldimg,onerror:"this.src='./static/images/default/imgfault.png'",alt:""}}):t._e(),t._v(" "),i("img",{attrs:{src:s("by21"),alt:""}})]),t._v(" "),i("div",{staticClass:"content_r"},[i("p",[t._v("场地："+t._s(e.stagenum))]),t._v(" "),i("p",[t._v("\n              开始时间："+t._s(e.readydate)+"\n              "),i("i",[t._v(t._s(e.readystarttime.slice(0,5)))])]),t._v(" "),i("p",[t._v("\n              结束时间："+t._s(e.readydate)+"\n              "),i("i",[t._v(t._s(e.readyendtime.slice(0,5)))])]),t._v(" "),"0"===e.showStatus||"1"===e.showStatus?i("button",{directives:[{name:"show",rawName:"v-show",value:t.limitid58show,expression:"limitid58show"}],on:{click:function(s){return t.affrmSite(e.id)}}},[t._v("确认到场")]):"2"===e.showStatus?i("button",{directives:[{name:"show",rawName:"v-show",value:t.limitid58show,expression:"limitid58show"}],staticClass:"disabled"},[t._v("已确认到场")]):t._e(),t._v(" "),"1"===e.showStatus?i("button",{staticClass:"disabled"},[t._v("已过取消时间")]):"3"===e.showStatus?i("button",{staticClass:"disabled"},[t._v("预约已过期")]):"4"===e.showStatus?i("button",{staticClass:"disabled"},[t._v("预约已取消")]):t._e(),t._v(" "),i("button",{on:{click:function(s){return t.lookTXR(e)}}},[t._v("\n              同行人\n            ")])])]),t._v(" "),0==e.showStatus||1==e.showStatus||2==e.showStatus||3==e.showStatus?i("img",{staticClass:"qrcodeIcon",attrs:{src:s("ny6W"),alt:""},on:{click:function(s){return t.quickMark(e.stagenum,e.serialnumber,e)}}}):t._e()])}),0),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.qrcodeActive,expression:"qrcodeActive"}],ref:"codeBox",staticClass:"codeBox",class:{qrcodeActive:t.qrcodeActive},on:{click:function(e){return e.target!==e.currentTarget?null:t.closeQrcode.apply(null,arguments)}}},[i("div",{staticClass:"qrcodeBox"},[i("div",{staticClass:"name"},[t._v(t._s(t.qrcodeName))]),t._v(" "),i("div",{staticStyle:{color:"#4493D5","font-size":"24px",margin:"10px 0px 20px","text-align":"center"}},[t._v("入场码")]),t._v(" "),i("div",{staticClass:"close",on:{click:t.closeQrcode}}),t._v(" "),i("div",{ref:"qrCodeUrl",attrs:{id:"qrcode"}})])])]),t._v(" "),i("div",{staticClass:"gohome",on:{click:function(e){return t.goback()}}},[i("img",{attrs:{src:s("gF6N"),alt:""}})])],1)},staticRenderFns:[]};var f=s("VU/8")(h,v,!1,function(t){s("cPv0")},"data-v-5d961564",null);e.default=f.exports}});